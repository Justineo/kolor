<!DOCTYPE html>

<html>
<head>
  <title>kolor.js</title>
  <meta http-equiv="content-type" content="text/html; charset=UTF-8">
  <meta name="viewport" content="width=device-width, target-densitydpi=160dpi, initial-scale=1.0, maximum-scale=1.0, user-scalable=0">
  <link rel="stylesheet" media="all" href="docco.css" />
</head>
<body>
  <div id="container">
    <div id="background"></div>
    
    <ul class="sections">
        
          <li id="title">
              <div class="annotation">
                  <h1>kolor.js</h1>
              </div>
          </li>
        
        
        
        <li id="section-1">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-1">&#182;</a>
              </div>
              
            </div>
            
            <div class="content"><div class='highlight'><pre>(<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(define)</span> </span>{</pre></div></div>
            
        </li>
        
        
        <li id="section-2">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-2">&#182;</a>
              </div>
              <h2 id="config">Config</h2>
<p>Global configuraiton. See <code>kolor.config</code> for more details.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>
    <span class="hljs-keyword">var</span> config = {
        cssPrecision: <span class="hljs-string">'auto'</span>
    };</pre></div></div>
            
        </li>
        
        
        <li id="section-3">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-3">&#182;</a>
              </div>
              <h2 id="utilities">Utilities</h2>

            </div>
            
            <div class="content"><div class='highlight'><pre>
    <span class="hljs-keyword">var</span> util = {</pre></div></div>
            
        </li>
        
        
        <li id="section-4">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-4">&#182;</a>
              </div>
              <h3 id="object-utils">Object utils</h3>

            </div>
            
        </li>
        
        
        <li id="section-5">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-5">&#182;</a>
              </div>
              <p>Checks if the given value is a number.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>        isNumber: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(value)</span> </span>{
            <span class="hljs-keyword">return</span> <span class="hljs-string">'[object Number]'</span> == <span class="hljs-built_in">Object</span>.prototype.toString.call(value) &amp;&amp; <span class="hljs-built_in">isFinite</span>(value);
        },</pre></div></div>
            
        </li>
        
        
        <li id="section-6">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-6">&#182;</a>
              </div>
              <p>Checks if the given value is a string.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>        isString: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(value)</span> </span>{
            <span class="hljs-keyword">return</span> <span class="hljs-string">'[object String]'</span> == <span class="hljs-built_in">Object</span>.prototype.toString.call(value);
        },</pre></div></div>
            
        </li>
        
        
        <li id="section-7">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-7">&#182;</a>
              </div>
              <p>Retrieves the type of the given value.</p>
<p>Return value can be ‘String’, ‘Number’, ‘Object’, ‘Array’, …</p>
<p><em>Result might be different among browsers.</em></p>

            </div>
            
            <div class="content"><div class='highlight'><pre>        typeOf: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(value)</span> </span>{
            <span class="hljs-keyword">return</span> <span class="hljs-built_in">Object</span>.prototype.toString.call(value).slice(<span class="hljs-number">8</span>, -<span class="hljs-number">1</span>);
        },</pre></div></div>
            
        </li>
        
        
        <li id="section-8">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-8">&#182;</a>
              </div>
              <p>Shorthand method for Object.prototype.hasOwnProperty.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>        has: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(obj, key)</span> </span>{
            <span class="hljs-keyword">return</span> <span class="hljs-built_in">Object</span>.prototype.hasOwnProperty.call(obj, key);
        },</pre></div></div>
            
        </li>
        
        
        <li id="section-9">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-9">&#182;</a>
              </div>
              <h3 id="array-utils">Array utils</h3>

            </div>
            
        </li>
        
        
        <li id="section-10">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-10">&#182;</a>
              </div>
              <p>Slices any array-ish object.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>        slice: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(arrayish, begin, end)</span> </span>{
            <span class="hljs-keyword">return</span> <span class="hljs-built_in">Array</span>.prototype.slice.call(arrayish, begin, end);
        },</pre></div></div>
            
        </li>
        
        
        <li id="section-11">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-11">&#182;</a>
              </div>
              <p>Swaps two array elements.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>        swap: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(items, i, j)</span> </span>{
            <span class="hljs-keyword">var</span> k = items[i];
            items[i] = items[j];
            items[j] = k;
        },</pre></div></div>
            
        </li>
        
        
        <li id="section-12">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-12">&#182;</a>
              </div>
              <p>Shuffles the given array using
<a href="http://en.wikipedia.org/wiki/Fisher%E2%80%93Yates_shuffle">Fisher-Yates shuffle</a>.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>        shuffle: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(items)</span> </span>{
            <span class="hljs-keyword">var</span> i, j, l = items.length;

            <span class="hljs-keyword">for</span> (i = l - <span class="hljs-number">1</span>; i &gt; <span class="hljs-number">0</span>; i --) {
                j = <span class="hljs-built_in">Math</span>.floor(<span class="hljs-built_in">Math</span>.random() * (i + <span class="hljs-number">1</span>));
                util.swap(items, i, j);
            }
        },</pre></div></div>
            
        </li>
        
        
        <li id="section-13">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-13">&#182;</a>
              </div>
              <p>Iterates through the given array and produces a new array by mapping each value through
a given function.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>        map: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(source, callback, opt_this)</span> </span>{
            <span class="hljs-keyword">var</span> results = [],
                l = source.length,
                i = l;
            <span class="hljs-keyword">while</span> (i--) {
                results[i] = callback.call(opt_this || source, source[i], i);
            }
            <span class="hljs-keyword">return</span> results;
        },</pre></div></div>
            
        </li>
        
        
        <li id="section-14">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-14">&#182;</a>
              </div>
              <h3 id="number-utils">Number utils</h3>

            </div>
            
        </li>
        
        
        <li id="section-15">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-15">&#182;</a>
              </div>
              <p>Clamps a number to a given range.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>        clamp: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(value, min, max)</span> </span>{
            <span class="hljs-keyword">if</span> (min &gt; max) {
                max = min + max;
                min = max - min;
                max = max - min;
            }
            <span class="hljs-keyword">return</span> <span class="hljs-built_in">Math</span>.min(max, <span class="hljs-built_in">Math</span>.max(min, value));
        },</pre></div></div>
            
        </li>
        
        
        <li id="section-16">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-16">&#182;</a>
              </div>
              <p>Wraps a number inside a given range with modulo operation.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>        wrap: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(value, min, max)</span> </span>{
            <span class="hljs-keyword">var</span> interval;
            <span class="hljs-keyword">if</span> (min &gt; max) {
                max = min + max;
                min = max - min;
                max = max - min;
            }
            interval = max - min;
            <span class="hljs-keyword">return</span> min + ((value % interval) + interval) % interval;
        },</pre></div></div>
            
        </li>
        
        
        <li id="section-17">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-17">&#182;</a>
              </div>
              <p>Fills leading zeros for a number to make sure it has a fixed width.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>        zeroFill: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(number, width)</span> </span>{
            number += <span class="hljs-string">''</span>;
            width -= number.length;
            <span class="hljs-keyword">if</span> (width &gt; <span class="hljs-number">0</span>) {
                <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">Array</span>(width + <span class="hljs-number">1</span>).join(<span class="hljs-string">'0'</span>) + number;
            }
            <span class="hljs-keyword">return</span> number + <span class="hljs-string">''</span>;
        },</pre></div></div>
            
        </li>
        
        
        <li id="section-18">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-18">&#182;</a>
              </div>
              <p>Generates a random number in a given range.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>        random: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(min, max)</span> </span>{
            <span class="hljs-keyword">if</span> (min === max) {
                <span class="hljs-keyword">return</span> min;
            }
            <span class="hljs-keyword">return</span> <span class="hljs-built_in">Math</span>.random() * (max - min) + min;
        },</pre></div></div>
            
        </li>
        
        
        <li id="section-19">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-19">&#182;</a>
              </div>
              <p>Extend the destination object from a source object.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>        extend: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(dest, source)</span> </span>{
            <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> key <span class="hljs-keyword">in</span> source) {
                dest[key] = source[key];
            }
            <span class="hljs-keyword">return</span> dest;
        }
    };</pre></div></div>
            
        </li>
        
        
        <li id="section-20">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-20">&#182;</a>
              </div>
              <h2 id="preparation">Preparation</h2>

            </div>
            
        </li>
        
        
        <li id="section-21">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-21">&#182;</a>
              </div>
              <h3 id="color-name-hex-map">Color name-hex map</h3>
<p>see <a href="http://dev.w3.org/csswg/css-color/#named-colors">Named Colors, CSS Color Module Level 4</a></p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    <span class="hljs-keyword">var</span> NAMED_COLORS = {
        aliceblue: <span class="hljs-string">'#f0f8ff'</span>,
        antiquewhite: <span class="hljs-string">'#faebd7'</span>,
        aqua: <span class="hljs-string">'#00ffff'</span>,
        aquamarine: <span class="hljs-string">'#7fffd4'</span>,
        azure: <span class="hljs-string">'#f0ffff'</span>,
        beige: <span class="hljs-string">'#f5f5dc'</span>,
        bisque: <span class="hljs-string">'#ffe4c4'</span>,
        black: <span class="hljs-string">'#000000'</span>,
        blanchedalmond: <span class="hljs-string">'#ffebcd'</span>,
        blue: <span class="hljs-string">'#0000ff'</span>,
        blueviolet: <span class="hljs-string">'#8a2be2'</span>,
        brown: <span class="hljs-string">'#a52a2a'</span>,
        burlywood: <span class="hljs-string">'#deb887'</span>,
        cadetblue: <span class="hljs-string">'#5f9ea0'</span>,
        chartreuse: <span class="hljs-string">'#7fff00'</span>,
        chocolate: <span class="hljs-string">'#d2691e'</span>,
        coral: <span class="hljs-string">'#ff7f50'</span>,
        cornflowerblue: <span class="hljs-string">'#6495ed'</span>,
        cornsilk: <span class="hljs-string">'#fff8dc'</span>,
        crimson: <span class="hljs-string">'#dc143c'</span>,
        cyan: <span class="hljs-string">'#00ffff'</span>,
        darkblue: <span class="hljs-string">'#00008b'</span>,
        darkcyan: <span class="hljs-string">'#008b8b'</span>,
        darkgoldenrod: <span class="hljs-string">'#b8860b'</span>,
        darkgray: <span class="hljs-string">'#a9a9a9'</span>,
        darkgreen: <span class="hljs-string">'#006400'</span>,
        darkgrey: <span class="hljs-string">'#a9a9a9'</span>,
        darkkhaki: <span class="hljs-string">'#bdb76b'</span>,
        darkmagenta: <span class="hljs-string">'#8b008b'</span>,
        darkolivegreen: <span class="hljs-string">'#556b2f'</span>,
        darkorange: <span class="hljs-string">'#ff8c00'</span>,
        darkorchid: <span class="hljs-string">'#9932cc'</span>,
        darkred: <span class="hljs-string">'#8b0000'</span>,
        darksalmon: <span class="hljs-string">'#e9967a'</span>,
        darkseagreen: <span class="hljs-string">'#8fbc8f'</span>,
        darkslateblue: <span class="hljs-string">'#483d8b'</span>,
        darkslategray: <span class="hljs-string">'#2f4f4f'</span>,
        darkslategrey: <span class="hljs-string">'#2f4f4f'</span>,
        darkturquoise: <span class="hljs-string">'#00ced1'</span>,
        darkviolet: <span class="hljs-string">'#9400d3'</span>,
        deeppink: <span class="hljs-string">'#ff1493'</span>,
        deepskyblue: <span class="hljs-string">'#00bfff'</span>,
        dimgray: <span class="hljs-string">'#696969'</span>,
        dimgrey: <span class="hljs-string">'#696969'</span>,
        dodgerblue: <span class="hljs-string">'#1e90ff'</span>,
        firebrick: <span class="hljs-string">'#b22222'</span>,
        floralwhite: <span class="hljs-string">'#fffaf0'</span>,
        forestgreen: <span class="hljs-string">'#228b22'</span>,
        fuchsia: <span class="hljs-string">'#ff00ff'</span>,
        gainsboro: <span class="hljs-string">'#dcdcdc'</span>,
        ghostwhite: <span class="hljs-string">'#f8f8ff'</span>,
        gold: <span class="hljs-string">'#ffd700'</span>,
        goldenrod: <span class="hljs-string">'#daa520'</span>,
        gray: <span class="hljs-string">'#808080'</span>,
        green: <span class="hljs-string">'#008000'</span>,
        greenyellow: <span class="hljs-string">'#adff2f'</span>,
        grey: <span class="hljs-string">'#808080'</span>,
        honeydew: <span class="hljs-string">'#f0fff0'</span>,
        hotpink: <span class="hljs-string">'#ff69b4'</span>,
        indianred: <span class="hljs-string">'#cd5c5c'</span>,
        indigo: <span class="hljs-string">'#4b0082'</span>,
        ivory: <span class="hljs-string">'#fffff0'</span>,
        khaki: <span class="hljs-string">'#f0e68c'</span>,
        lavender: <span class="hljs-string">'#e6e6fa'</span>,
        lavenderblush: <span class="hljs-string">'#fff0f5'</span>,
        lawngreen: <span class="hljs-string">'#7cfc00'</span>,
        lemonchiffon: <span class="hljs-string">'#fffacd'</span>,
        lightblue: <span class="hljs-string">'#add8e6'</span>,
        lightcoral: <span class="hljs-string">'#f08080'</span>,
        lightcyan: <span class="hljs-string">'#e0ffff'</span>,
        lightgoldenrodyellow: <span class="hljs-string">'#fafad2'</span>,
        lightgray: <span class="hljs-string">'#d3d3d3'</span>,
        lightgreen: <span class="hljs-string">'#90ee90'</span>,
        lightgrey: <span class="hljs-string">'#d3d3d3'</span>,
        lightpink: <span class="hljs-string">'#ffb6c1'</span>,
        lightsalmon: <span class="hljs-string">'#ffa07a'</span>,
        lightseagreen: <span class="hljs-string">'#20b2aa'</span>,
        lightskyblue: <span class="hljs-string">'#87cefa'</span>,
        lightslategray: <span class="hljs-string">'#778899'</span>,
        lightslategrey: <span class="hljs-string">'#778899'</span>,
        lightsteelblue: <span class="hljs-string">'#b0c4de'</span>,
        lightyellow: <span class="hljs-string">'#ffffe0'</span>,
        lime: <span class="hljs-string">'#00ff00'</span>,
        limegreen: <span class="hljs-string">'#32cd32'</span>,
        linen: <span class="hljs-string">'#faf0e6'</span>,
        magenta: <span class="hljs-string">'#ff00ff'</span>,
        maroon: <span class="hljs-string">'#800000'</span>,
        mediumaquamarine: <span class="hljs-string">'#66cdaa'</span>,
        mediumblue: <span class="hljs-string">'#0000cd'</span>,
        mediumorchid: <span class="hljs-string">'#ba55d3'</span>,
        mediumpurple: <span class="hljs-string">'#9370db'</span>,
        mediumseagreen: <span class="hljs-string">'#3cb371'</span>,
        mediumslateblue: <span class="hljs-string">'#7b68ee'</span>,
        mediumspringgreen: <span class="hljs-string">'#00fa9a'</span>,
        mediumturquoise: <span class="hljs-string">'#48d1cc'</span>,
        mediumvioletred: <span class="hljs-string">'#c71585'</span>,
        midnightblue: <span class="hljs-string">'#191970'</span>,
        mintcream: <span class="hljs-string">'#f5fffa'</span>,
        mistyrose: <span class="hljs-string">'#ffe4e1'</span>,
        moccasin: <span class="hljs-string">'#ffe4b5'</span>,
        navajowhite: <span class="hljs-string">'#ffdead'</span>,
        navy: <span class="hljs-string">'#000080'</span>,
        oldlace: <span class="hljs-string">'#fdf5e6'</span>,
        olive: <span class="hljs-string">'#808000'</span>,
        olivedrab: <span class="hljs-string">'#6b8e23'</span>,
        orange: <span class="hljs-string">'#ffa500'</span>,
        orangered: <span class="hljs-string">'#ff4500'</span>,
        orchid: <span class="hljs-string">'#da70d6'</span>,
        palegoldenrod: <span class="hljs-string">'#eee8aa'</span>,
        palegreen: <span class="hljs-string">'#98fb98'</span>,
        paleturquoise: <span class="hljs-string">'#afeeee'</span>,
        palevioletred: <span class="hljs-string">'#db7093'</span>,
        papayawhip: <span class="hljs-string">'#ffefd5'</span>,
        peachpuff: <span class="hljs-string">'#ffdab9'</span>,
        peru: <span class="hljs-string">'#cd853f'</span>,
        pink: <span class="hljs-string">'#ffc0cb'</span>,
        plum: <span class="hljs-string">'#dda0dd'</span>,
        powderblue: <span class="hljs-string">'#b0e0e6'</span>,
        purple: <span class="hljs-string">'#800080'</span>,
        red: <span class="hljs-string">'#ff0000'</span>,
        rebeccapurple: <span class="hljs-string">'#663399'</span>,
        rosybrown: <span class="hljs-string">'#bc8f8f'</span>,
        royalblue: <span class="hljs-string">'#4169e1'</span>,
        saddlebrown: <span class="hljs-string">'#8b4513'</span>,
        salmon: <span class="hljs-string">'#fa8072'</span>,
        sandybrown: <span class="hljs-string">'#f4a460'</span>,
        seagreen: <span class="hljs-string">'#2e8b57'</span>,
        seashell: <span class="hljs-string">'#fff5ee'</span>,
        sienna: <span class="hljs-string">'#a0522d'</span>,
        silver: <span class="hljs-string">'#c0c0c0'</span>,
        skyblue: <span class="hljs-string">'#87ceeb'</span>,
        slateblue: <span class="hljs-string">'#6a5acd'</span>,
        slategray: <span class="hljs-string">'#708090'</span>,
        slategrey: <span class="hljs-string">'#708090'</span>,
        snow: <span class="hljs-string">'#fffafa'</span>,
        springgreen: <span class="hljs-string">'#00ff7f'</span>,
        steelblue: <span class="hljs-string">'#4682b4'</span>,
        tan: <span class="hljs-string">'#d2b48c'</span>,
        teal: <span class="hljs-string">'#008080'</span>,
        thistle: <span class="hljs-string">'#d8bfd8'</span>,
        tomato: <span class="hljs-string">'#ff6347'</span>,
        turquoise: <span class="hljs-string">'#40e0d0'</span>,
        violet: <span class="hljs-string">'#ee82ee'</span>,
        wheat: <span class="hljs-string">'#f5deb3'</span>,
        white: <span class="hljs-string">'#ffffff'</span>,
        whitesmoke: <span class="hljs-string">'#f5f5f5'</span>,
        yellow: <span class="hljs-string">'#ffff00'</span>,
        yellowgreen: <span class="hljs-string">'#9acd32'</span>,

        transparent: <span class="hljs-string">'rgba(0, 0, 0, 0)'</span> <span class="hljs-comment">// CSS keyword</span>
    };</pre></div></div>
            
        </li>
        
        
        <li id="section-22">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-22">&#182;</a>
              </div>
              <h3 id="named-hues">Named hues</h3>
<p>see <a href="http://dev.w3.org/csswg/css-color/#simple-hues">Simple Named Hues: the <named-hue> term, CSS Color Module Level 4</a></p>
<h4 id="base-hues">Base hues</h4>

            </div>
            
            <div class="content"><div class='highlight'><pre>    <span class="hljs-keyword">var</span> BASE_HUE = {
        red: <span class="hljs-number">0</span>,
        orange: <span class="hljs-number">30</span>,
        yellow: <span class="hljs-number">60</span>,
        green: <span class="hljs-number">120</span>,
        blue: <span class="hljs-number">240</span>,
        purple: <span class="hljs-number">300</span>
    };</pre></div></div>
            
        </li>
        
        
        <li id="section-23">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-23">&#182;</a>
              </div>
              <h4 id="splash-hues">Splash hues</h4>

            </div>
            
            <div class="content"><div class='highlight'><pre>    <span class="hljs-keyword">var</span> SPLASH_HUE = {
        reddish: <span class="hljs-number">0</span>,
        orangish: <span class="hljs-number">30</span>,
        yellowish: <span class="hljs-number">60</span>,
        greenish: <span class="hljs-number">120</span>,
        bluish: <span class="hljs-number">240</span>,
        purplish: <span class="hljs-number">300</span>
    };</pre></div></div>
            
        </li>
        
        
        <li id="section-24">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-24">&#182;</a>
              </div>
              <p>Sorted base hues in array</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    <span class="hljs-keyword">var</span> NAMED_HUE_INDEX = {
        <span class="hljs-number">0</span>: <span class="hljs-number">0</span>,
        <span class="hljs-number">30</span>: <span class="hljs-number">1</span>,
        <span class="hljs-number">60</span>: <span class="hljs-number">2</span>,
        <span class="hljs-number">120</span>: <span class="hljs-number">3</span>,
        <span class="hljs-number">240</span>: <span class="hljs-number">4</span>,
        <span class="hljs-number">300</span>: <span class="hljs-number">5</span>
    };</pre></div></div>
            
        </li>
        
        
        <li id="section-25">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-25">&#182;</a>
              </div>
              <p>0 -&gt; 360 in some circumstances for correct calculation</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">fixHues</span><span class="hljs-params">(h1, h2)</span> </span>{
        <span class="hljs-keyword">var</span> diff = <span class="hljs-built_in">Math</span>.abs(NAMED_HUE_INDEX[h1] - NAMED_HUE_INDEX[h2]);
        <span class="hljs-keyword">if</span> (diff !== <span class="hljs-number">1</span> &amp;&amp; diff !== <span class="hljs-number">5</span>) {
            <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
        }

        <span class="hljs-keyword">var</span> result = {
            h1: h1,
            h2: h2
        };
        <span class="hljs-keyword">if</span> (h1 === <span class="hljs-number">0</span> &amp;&amp; h2 === <span class="hljs-number">300</span>) {
            result.h1 = <span class="hljs-number">360</span>;
        } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (h2 === <span class="hljs-number">0</span> &amp;&amp; h1 === <span class="hljs-number">300</span>) {
            result.h2 = <span class="hljs-number">360</span>;
        }
        <span class="hljs-keyword">return</span> result;
    }</pre></div></div>
            
        </li>
        
        
        <li id="section-26">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-26">&#182;</a>
              </div>
              <p>Parses simple named hues</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">parseNamedHues</span><span class="hljs-params">(value)</span> </span>{
        <span class="hljs-keyword">var</span> tokens = value.split(<span class="hljs-regexp">/\s+/</span>),
            l = tokens.length;

        <span class="hljs-keyword">if</span> (l &lt; <span class="hljs-number">1</span> || l &gt; <span class="hljs-number">2</span>) {
            <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
        }

        <span class="hljs-keyword">var</span> t1 = tokens[l - <span class="hljs-number">1</span>].toLowerCase();

        <span class="hljs-keyword">if</span> (!(t1 <span class="hljs-keyword">in</span> BASE_HUE)) {
            <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
        }

        <span class="hljs-keyword">var</span> h1 = BASE_HUE[t1];</pre></div></div>
            
        </li>
        
        
        <li id="section-27">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-27">&#182;</a>
              </div>
              <p>single-value syntax</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>        <span class="hljs-keyword">if</span> (l === <span class="hljs-number">1</span>) {
            <span class="hljs-keyword">return</span> h1;
        }</pre></div></div>
            
        </li>
        
        
        <li id="section-28">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-28">&#182;</a>
              </div>
              <p>double-value syntax</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>        <span class="hljs-keyword">var</span> h2,
            t2 = tokens[<span class="hljs-number">0</span>].toLowerCase(),
            hues;
        <span class="hljs-keyword">if</span> (t2 <span class="hljs-keyword">in</span> BASE_HUE) {
            h2 = BASE_HUE[t2];
            hues = fixHues(h1, h2);
            <span class="hljs-keyword">return</span> hues ? (hues.h1 + hues.h2) / <span class="hljs-number">2</span> : <span class="hljs-literal">false</span>;
        } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (t2 <span class="hljs-keyword">in</span> SPLASH_HUE) {
            h2 = SPLASH_HUE[t2];
            hues = fixHues(h1, h2);
            <span class="hljs-keyword">return</span> hues ? (hues.h1 + (hues.h2 - hues.h1) / <span class="hljs-number">4</span>) : <span class="hljs-literal">false</span>;
        } <span class="hljs-keyword">else</span> {
            <span class="hljs-keyword">var</span> found = t2.match(<span class="hljs-regexp">/(\w+)\(\s*([^\)]+)\s*\)/i</span>);
            <span class="hljs-keyword">if</span> (!found) {
                <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
            }
            t2 = found[<span class="hljs-number">1</span>];
            <span class="hljs-keyword">if</span> (t2 <span class="hljs-keyword">in</span> SPLASH_HUE) {
                h2 = SPLASH_HUE[t2];
                hues = fixHues(h1, h2);
                <span class="hljs-keyword">var</span> percent = DATATYPES[PERCENT].parse(found[<span class="hljs-number">2</span>]);
                <span class="hljs-keyword">if</span> (percent === <span class="hljs-literal">false</span>) {
                    <span class="hljs-keyword">return</span> percent;
                }
                <span class="hljs-keyword">return</span> hues ? (hues.h1 + (hues.h2 - hues.h1) * percent) : <span class="hljs-literal">false</span>;
            }
        }

        <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
    }</pre></div></div>
            
        </li>
        
        
        <li id="section-29">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-29">&#182;</a>
              </div>
              <h3 id="color-value-data-type-flags">Color value data type flags</h3>
<p>Uses powers of 2 in order to easily define several data types for one data field.</p>
<ul>
<li>INTEGER: 0, 128, 255, …</li>
<li>NUMBER: 0, 0.5, 0.75, …</li>
<li>PERCENT: 10%, 87.53%, …</li>
</ul>

            </div>
            
            <div class="content"><div class='highlight'><pre>    <span class="hljs-keyword">var</span> INTEGER = <span class="hljs-number">1</span>,
        NUMBER = <span class="hljs-number">2</span>,
        PERCENT = <span class="hljs-number">4</span>,
        HUE = <span class="hljs-number">8</span>;</pre></div></div>
            
        </li>
        
        
        <li id="section-30">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-30">&#182;</a>
              </div>
              <h3 id="utils-for-each-data-type">Utils for each data type</h3>
<ul>
<li><em>parse</em> - gets valid value from various types of input.</li>
<li><em>stringify</em> - produces string value according to actual data value.</li>
</ul>

            </div>
            
            <div class="content"><div class='highlight'><pre>    <span class="hljs-keyword">var</span> DATATYPES = {
        <span class="hljs-number">1</span>: {
            flag: INTEGER,
            parse: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(value)</span> </span>{
                <span class="hljs-keyword">switch</span> (util.typeOf(value)) {
                    <span class="hljs-keyword">case</span> <span class="hljs-string">'Number'</span>:
                        value = <span class="hljs-built_in">Math</span>.round(value);
                        <span class="hljs-keyword">break</span>;
                    <span class="hljs-keyword">case</span> <span class="hljs-string">'String'</span>:
                        <span class="hljs-keyword">if</span> (value.match(<span class="hljs-regexp">/^[\-+]?\d+$/i</span>)) {
                            value = <span class="hljs-built_in">parseInt</span>(value, <span class="hljs-number">10</span>);
                        } <span class="hljs-keyword">else</span> {
                            value = <span class="hljs-literal">false</span>;
                        }
                        <span class="hljs-keyword">break</span>;
                    <span class="hljs-keyword">default</span>:
                        value = <span class="hljs-literal">false</span>;
                }
                <span class="hljs-keyword">return</span> value;
            },
            stringify: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(value)</span> </span>{
                <span class="hljs-keyword">return</span> <span class="hljs-built_in">Math</span>.round(value) + <span class="hljs-string">''</span>;
            }
        },
        <span class="hljs-number">2</span>: {
            flag: NUMBER,
            parse: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(value)</span> </span>{
                <span class="hljs-keyword">switch</span> (util.typeOf(value)) {
                    <span class="hljs-keyword">case</span> <span class="hljs-string">'Number'</span>:
                        <span class="hljs-keyword">break</span>;
                    <span class="hljs-keyword">case</span> <span class="hljs-string">'String'</span>:
                        <span class="hljs-keyword">if</span> (value.match(<span class="hljs-regexp">/^[\-+]?\d+(?:\.\d+)?$|^[\-+]?\.\d+$/i</span>)) {
                            value = <span class="hljs-built_in">parseFloat</span>(value);
                        } <span class="hljs-keyword">else</span> {
                            value = <span class="hljs-literal">false</span>;
                        }
                        <span class="hljs-keyword">break</span>;
                    <span class="hljs-keyword">default</span>:
                        value = <span class="hljs-literal">false</span>;
                }
                <span class="hljs-keyword">return</span> value;
            },
            stringify: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(value)</span> </span>{
                <span class="hljs-keyword">var</span> precision = config.cssPrecision;
                <span class="hljs-keyword">return</span> precision === <span class="hljs-string">'auto'</span>
                    ? value + <span class="hljs-string">''</span>
                    : <span class="hljs-built_in">parseFloat</span>(value.toFixed(precision)) + <span class="hljs-string">''</span>;
            }
        },
        <span class="hljs-number">4</span>: {
            flag: PERCENT,
            parse: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(value)</span> </span>{
                <span class="hljs-keyword">switch</span> (util.typeOf(value)) {
                    <span class="hljs-keyword">case</span> <span class="hljs-string">'String'</span>:
                        <span class="hljs-keyword">if</span> (value.match(<span class="hljs-regexp">/^[\-+]?\d+(?:\.\d+)?%$|^[\-+]?\.\d+%$/i</span>)) {
                            value = <span class="hljs-built_in">parseFloat</span>(value) / <span class="hljs-number">100</span>;
                        } <span class="hljs-keyword">else</span> {
                            value = <span class="hljs-literal">false</span>;
                        }
                        <span class="hljs-keyword">break</span>;
                    <span class="hljs-keyword">default</span>:
                        value = <span class="hljs-literal">false</span>;
                }
                <span class="hljs-keyword">return</span> value;
            },
            stringify: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(value)</span> </span>{
                <span class="hljs-keyword">var</span> precision = config.cssPrecision;
                <span class="hljs-keyword">return</span> precision === <span class="hljs-string">'auto'</span>
                    ? value * <span class="hljs-number">100</span> + <span class="hljs-string">'%'</span>
                    : <span class="hljs-built_in">parseFloat</span>((value * <span class="hljs-number">100</span>).toFixed(precision)) + <span class="hljs-string">'%'</span>;
            }
        },
        <span class="hljs-number">8</span>: {
            flag: HUE,
            parse: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(value)</span> </span>{
                <span class="hljs-keyword">switch</span> (util.typeOf(value)) {
                    <span class="hljs-keyword">case</span> <span class="hljs-string">'String'</span>:
                        <span class="hljs-keyword">if</span> (value.match(<span class="hljs-regexp">/^[\-+]?\d+(?:\.\d+)?deg$|^[\-+]?\.\d+deg$/i</span>)) {
                            value = <span class="hljs-built_in">parseFloat</span>(value);
                        } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (value = parseNamedHues(value)) {</pre></div></div>
            
        </li>
        
        
        <li id="section-31">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-31">&#182;</a>
              </div>
              <p>do nothing</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>                        } <span class="hljs-keyword">else</span> {
                            value = <span class="hljs-literal">false</span>;
                        }
                        <span class="hljs-keyword">break</span>;
                    <span class="hljs-keyword">default</span>:
                        value = <span class="hljs-literal">false</span>;
                }
                <span class="hljs-keyword">return</span> value;
            },
            stringify: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(value)</span> </span>{
                <span class="hljs-keyword">var</span> precision = config.cssPrecision;
                <span class="hljs-keyword">return</span> precision === <span class="hljs-string">'auto'</span>
                    ? value + <span class="hljs-string">'deg'</span>
                    : <span class="hljs-built_in">parseFloat</span>(value.toFixed(precision)) + <span class="hljs-string">'deg'</span>;
            }
        }
    };</pre></div></div>
            
        </li>
        
        
        <li id="section-32">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-32">&#182;</a>
              </div>
              <h3 id="value-filters">Value filters</h3>

            </div>
            
            <div class="content"><div class='highlight'><pre>    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">CLAMP</span><span class="hljs-params">(value)</span> </span>{
        <span class="hljs-keyword">return</span> util.clamp(value, <span class="hljs-keyword">this</span>.range[<span class="hljs-number">0</span>], <span class="hljs-keyword">this</span>.range[<span class="hljs-number">1</span>]);
    }


    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">MOD</span><span class="hljs-params">(value)</span> </span>{
        <span class="hljs-keyword">return</span> util.wrap(value, <span class="hljs-keyword">this</span>.range[<span class="hljs-number">0</span>], <span class="hljs-keyword">this</span>.range[<span class="hljs-number">1</span>]);
    }</pre></div></div>
            
        </li>
        
        
        <li id="section-33">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-33">&#182;</a>
              </div>
              <h3 id="color-channels">Color channels</h3>

            </div>
            
            <div class="content"><div class='highlight'><pre>    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">Channel</span><span class="hljs-params">(options)</span> </span>{
        util.extend(<span class="hljs-keyword">this</span>, options);
    }</pre></div></div>
            
        </li>
        
        
        <li id="section-34">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-34">&#182;</a>
              </div>
              <h4 id="channel-create-type-name-alias-options-">Channel.create(<em>type</em>, <em>name</em>, <em>alias</em>[, <em>options</em>])</h4>
<p>Create a color channel.</p>
<h5 id="parameters">Parameters</h5>
<ul>
<li><em>type</em> - the channel type.</li>
<li><em>name</em> - the name of the channel.</li>
<li><em>alias</em> - the alias of the channel.</li>
<li><em>options</em> - additional options of the channel.</li>
</ul>
<h5 id="return-values">Return values</h5>
<p>Returns the created channel object.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    Channel.create = <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(type, name, alias, options)</span> </span>{
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> type(util.extend(options || {}, {
            name: name,
            alias: alias
        }));
    };</pre></div></div>
            
        </li>
        
        
        <li id="section-35">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-35">&#182;</a>
              </div>
              <p>Constructor for 0~255 integer or percentage.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">Octet</span><span class="hljs-params">()</span> </span>{
        Channel.apply(<span class="hljs-keyword">this</span>, <span class="hljs-built_in">arguments</span>);
        <span class="hljs-keyword">this</span>.dataType = INTEGER|PERCENT;
        <span class="hljs-keyword">this</span>.cssType = INTEGER;
        <span class="hljs-keyword">this</span>.range = [<span class="hljs-number">0</span>, <span class="hljs-number">255</span>];
        <span class="hljs-keyword">this</span>.filter = CLAMP;
        <span class="hljs-keyword">this</span>.initial = <span class="hljs-number">255</span>;
    }
    Octet.prototype = <span class="hljs-keyword">new</span> Channel();
    Octet.prototype.constructor = Octet;</pre></div></div>
            
        </li>
        
        
        <li id="section-36">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-36">&#182;</a>
              </div>
              <p>Constructor for channel can be number from 0~1 or percentage.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">Ratio</span><span class="hljs-params">()</span> </span>{
        Channel.apply(<span class="hljs-keyword">this</span>, <span class="hljs-built_in">arguments</span>);
        <span class="hljs-keyword">this</span>.dataType = NUMBER|PERCENT;
        <span class="hljs-keyword">this</span>.cssType = NUMBER;
        <span class="hljs-keyword">this</span>.range = [<span class="hljs-number">0</span>, <span class="hljs-number">1</span>];
        <span class="hljs-keyword">this</span>.filter = CLAMP;
        <span class="hljs-keyword">this</span>.initial = <span class="hljs-number">1</span>;
    }
    Ratio.prototype = <span class="hljs-keyword">new</span> Channel();
    Ratio.prototype.constructor = Ratio;</pre></div></div>
            
        </li>
        
        
        <li id="section-37">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-37">&#182;</a>
              </div>
              <p>Constructor for ratios which output percent values.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">Percent</span><span class="hljs-params">()</span> </span>{
        Ratio.apply(<span class="hljs-keyword">this</span>, <span class="hljs-built_in">arguments</span>);
        <span class="hljs-keyword">this</span>.cssType = PERCENT;
    }
    Percent.prototype = <span class="hljs-keyword">new</span> Ratio();
    Percent.prototype.constructor = Percent;</pre></div></div>
            
        </li>
        
        
        <li id="section-38">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-38">&#182;</a>
              </div>
              <p>Constructor for those channel can be .</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">Hue</span><span class="hljs-params">()</span> </span>{
        Channel.apply(<span class="hljs-keyword">this</span>, <span class="hljs-built_in">arguments</span>);
        <span class="hljs-keyword">this</span>.dataType = NUMBER|HUE;
        <span class="hljs-keyword">this</span>.cssType = NUMBER;
        <span class="hljs-keyword">this</span>.range = [<span class="hljs-number">0</span>, <span class="hljs-number">360</span>];
        <span class="hljs-keyword">this</span>.filter = MOD;
        <span class="hljs-keyword">this</span>.initial = <span class="hljs-number">0</span>;
    }
    Hue.prototype = <span class="hljs-keyword">new</span> Channel();
    Hue.prototype.constructor = Hue;</pre></div></div>
            
        </li>
        
        
        <li id="section-39">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-39">&#182;</a>
              </div>
              <h3 id="color-space-configurations">Color space configurations</h3>

            </div>
            
            <div class="content"><div class='highlight'><pre>    <span class="hljs-keyword">var</span> SPACES = {
        RGB: {
            channels: [
                Channel.create(Octet, <span class="hljs-string">'red'</span>, <span class="hljs-string">'r'</span>),
                Channel.create(Octet, <span class="hljs-string">'green'</span>, <span class="hljs-string">'g'</span>),
                Channel.create(Octet, <span class="hljs-string">'blue'</span>, <span class="hljs-string">'b'</span>)
            ],
            pattern: <span class="hljs-regexp">/rgb\(\s*([^,]+?)\s*,\s*([^,]+?)\s*,\s*([^\)]+?)\s*\)/i</span>
        },
        RGBA: {
            channels: [
                Channel.create(Octet, <span class="hljs-string">'red'</span>, <span class="hljs-string">'r'</span>),
                Channel.create(Octet, <span class="hljs-string">'green'</span>, <span class="hljs-string">'g'</span>),
                Channel.create(Octet, <span class="hljs-string">'blue'</span>, <span class="hljs-string">'b'</span>),
                Channel.create(Ratio, <span class="hljs-string">'alpha'</span>, <span class="hljs-string">'a'</span>)
            ],
            pattern: <span class="hljs-regexp">/rgba\(\s*([^,]+?)\s*,\s*([^,]+?)\s*,\s*([^,]+?)\s*,\s*([^\)]+?)\s*\)/i</span>
        },
        HSL: {
            channels: [
                Channel.create(Hue, <span class="hljs-string">'hue'</span>, <span class="hljs-string">'h'</span>),
                Channel.create(Percent, <span class="hljs-string">'saturation'</span>, <span class="hljs-string">'s'</span>),
                Channel.create(Percent, <span class="hljs-string">'lightness'</span>, <span class="hljs-string">'l'</span>)
            ],
            pattern: <span class="hljs-regexp">/hsl\(\s*([^,]+?)\s*,\s*([^,]+?)\s*,\s*([^\)]+?)\s*\)/i</span>
        },
        HSLA: {
            channels: [
                Channel.create(Hue, <span class="hljs-string">'hue'</span>, <span class="hljs-string">'h'</span>),
                Channel.create(Percent, <span class="hljs-string">'saturation'</span>, <span class="hljs-string">'s'</span>),
                Channel.create(Percent, <span class="hljs-string">'lightness'</span>, <span class="hljs-string">'l'</span>),
                Channel.create(Ratio, <span class="hljs-string">'alpha'</span>, <span class="hljs-string">'a'</span>)
            ],
            pattern: <span class="hljs-regexp">/hsla\(\s*([^,]+?)\s*,\s*([^,]+?)\s*,\s*([^,]+?)\s*,\s*([^\)]+?)\s*\)/i</span>
        },
        HSV: {
            channels: [
                Channel.create(Hue, <span class="hljs-string">'hue'</span>, <span class="hljs-string">'h'</span>),
                Channel.create(Percent, <span class="hljs-string">'saturation'</span>, <span class="hljs-string">'s'</span>),
                Channel.create(Percent, <span class="hljs-string">'value'</span>, <span class="hljs-string">'v'</span>),
            ],
            pattern: <span class="hljs-regexp">/hsv\(\s*([^,]+?)\s*,\s*([^,]+?)\s*,\s*([^\)]+?)\s*\)/i</span>
        },
        HSVA: {
            channels: [
                Channel.create(Hue, <span class="hljs-string">'hue'</span>, <span class="hljs-string">'h'</span>),
                Channel.create(Percent, <span class="hljs-string">'saturation'</span>, <span class="hljs-string">'s'</span>),
                Channel.create(Percent, <span class="hljs-string">'value'</span>, <span class="hljs-string">'v'</span>),
                Channel.create(Ratio, <span class="hljs-string">'alpha'</span>, <span class="hljs-string">'a'</span>)
            ],
            pattern: <span class="hljs-regexp">/hsva\(\s*([^,]+?)\s*,\s*([^,]+?)\s*,\s*([^,]+?)\s*,\s*([^\)]+?)\s*\)/i</span>
        },
        HWB: {
            channels: [
                Channel.create(Hue, <span class="hljs-string">'hue'</span>, <span class="hljs-string">'h'</span>),
                Channel.create(Percent, <span class="hljs-string">'whiteness'</span>, <span class="hljs-string">'w'</span>),
                Channel.create(Percent, <span class="hljs-string">'blackness'</span>, <span class="hljs-string">'b'</span>),
                Channel.create(Ratio, <span class="hljs-string">'alpha'</span>, <span class="hljs-string">'a'</span>)
            ],
            pattern: <span class="hljs-regexp">/hwb\(\s*([^,]+?)\s*,\s*([^,]+?)\s*,\s*([^,\)]+?)(?:\s*,\s*([^\)]+?))?\s*\)/i</span>
        },
        GRAY: {
            channels: [
                Channel.create(Octet, <span class="hljs-string">'shade'</span>, <span class="hljs-string">'s'</span>),
                Channel.create(Ratio, <span class="hljs-string">'alpha'</span>, <span class="hljs-string">'a'</span>)
            ],
            pattern: <span class="hljs-regexp">/gray\(\s*([^,\)]+?)(?:\s*,\s*([^\)]+?))?\s*\)/i</span>
        },
        CMYK: {
            channels: [
                Channel.create(Octet, <span class="hljs-string">'cyan'</span>, <span class="hljs-string">'c'</span>),
                Channel.create(Octet, <span class="hljs-string">'magenta'</span>, <span class="hljs-string">'m'</span>),
                Channel.create(Octet, <span class="hljs-string">'yellow'</span>, <span class="hljs-string">'y'</span>),
                Channel.create(Ratio, <span class="hljs-string">'black'</span>, [<span class="hljs-string">'b'</span>, <span class="hljs-string">'k'</span>])
            ],
            pattern: <span class="hljs-regexp">/(?:device-)?cmyk\(\s*([^,]+?)\s*,\s*([^,]+?)\s*,\s*([^,]+?)\s*,\s*([^,]+?)\s*\)/i</span>
        }
    };</pre></div></div>
            
        </li>
        
        
        <li id="section-40">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-40">&#182;</a>
              </div>
              <h3 id="space-converting-algorithms">Space converting algorithms</h3>

            </div>
            
        </li>
        
        
        <li id="section-41">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-41">&#182;</a>
              </div>
              <p>Clones a color object in the same space.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">CLONE</span><span class="hljs-params">()</span> </span>{
        <span class="hljs-keyword">return</span> kolor(<span class="hljs-keyword">this</span>);
    }</pre></div></div>
            
        </li>
        
        
        <li id="section-42">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-42">&#182;</a>
              </div>
              <p>Produces a new color object by adding alpha channel to the old one.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">ADD_ALPHA</span><span class="hljs-params">()</span> </span>{
        <span class="hljs-keyword">var</span> space = <span class="hljs-keyword">this</span>.space(),
            channels = SPACES[space].channels,
            l = channels.length,
            result = [];

        <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> i = <span class="hljs-number">0</span>; i &lt; l; i++) {
            result.push(<span class="hljs-keyword">this</span>[channels[i].name]());
        }
        result.push(<span class="hljs-number">1</span>);
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> kolor[space + <span class="hljs-string">'A'</span>](result);
    }</pre></div></div>
            
        </li>
        
        
        <li id="section-43">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-43">&#182;</a>
              </div>
              <p>Produces a new color object by removing alpha channel from the old one.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">REMOVE_ALPHA</span><span class="hljs-params">()</span> </span>{
        <span class="hljs-keyword">var</span> space = <span class="hljs-keyword">this</span>.space(),
            channels = SPACES[space].channels,
            l = channels.length,
            result = [];

        <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> i = <span class="hljs-number">0</span>; i &lt; l - <span class="hljs-number">1</span>; i++) {
            result.push(<span class="hljs-keyword">this</span>[channels[i].name]());
        }
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> kolor[space.slice(<span class="hljs-number">0</span>, -<span class="hljs-number">1</span>)](result);
    }</pre></div></div>
            
        </li>
        
        
        <li id="section-44">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-44">&#182;</a>
              </div>
              <p>Naively converts RGB color to CMYK</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">RGB_TO_CMYK</span><span class="hljs-params">()</span> </span>{
        <span class="hljs-keyword">var</span> r = <span class="hljs-keyword">this</span>.r() / <span class="hljs-number">255</span>,
            g = <span class="hljs-keyword">this</span>.g() / <span class="hljs-number">255</span>,
            b = <span class="hljs-keyword">this</span>.b() / <span class="hljs-number">255</span>
            black = <span class="hljs-number">1</span> - <span class="hljs-built_in">Math</span>.max(r, g, b);

        <span class="hljs-keyword">if</span> (black === <span class="hljs-number">0</span>) {
            <span class="hljs-keyword">return</span> kolor.cmyk(<span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>);
        }

        <span class="hljs-keyword">var</span> c = (<span class="hljs-number">1</span> - r - black) / (<span class="hljs-number">1</span> - black) * <span class="hljs-number">255</span>,
            m = (<span class="hljs-number">1</span> - g - black) / (<span class="hljs-number">1</span> - black) * <span class="hljs-number">255</span>,
            y = (<span class="hljs-number">1</span> - b - black) / (<span class="hljs-number">1</span> - black) * <span class="hljs-number">255</span>;
        <span class="hljs-keyword">return</span> kolor.cmyk(c, m, y, black);
    }</pre></div></div>
            
        </li>
        
        
        <li id="section-45">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-45">&#182;</a>
              </div>
              <p>Converts RGBA color to HSLA.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">RGBA_TO_HSLA</span><span class="hljs-params">()</span> </span>{
        <span class="hljs-keyword">var</span> r = <span class="hljs-keyword">this</span>.r() / <span class="hljs-number">255</span>,
            g = <span class="hljs-keyword">this</span>.g() / <span class="hljs-number">255</span>,
            b = <span class="hljs-keyword">this</span>.b() / <span class="hljs-number">255</span>,
            a = <span class="hljs-keyword">this</span>.a(),
            max = <span class="hljs-built_in">Math</span>.max(r, g, b),
            min = <span class="hljs-built_in">Math</span>.min(r, g, b),
            diff = max - min,
            sum = max + min,
            h, s, l;

        <span class="hljs-keyword">if</span> (max === min) {
            h = <span class="hljs-number">0</span>;
        } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (max === r &amp;&amp; g &gt;= b) {
            h = <span class="hljs-number">60</span> * (g - b) / diff + <span class="hljs-number">0</span>;
        } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (max === r &amp;&amp; g &lt; b) {
            h = <span class="hljs-number">60</span> * (g - b) / diff + <span class="hljs-number">360</span>;
        } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (max === g) {
            h = <span class="hljs-number">60</span> * (b - r) / diff + <span class="hljs-number">120</span>;
        } <span class="hljs-keyword">else</span> { <span class="hljs-comment">//max === b</span>
            h = <span class="hljs-number">60</span> * (r - g) / diff + <span class="hljs-number">240</span>;
        }

        l = sum / <span class="hljs-number">2</span>;

        <span class="hljs-keyword">if</span> (l === <span class="hljs-number">0</span> || max === min) {
            s = <span class="hljs-number">0</span>;
        } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (<span class="hljs-number">0</span> &lt; l &amp;&amp; l &lt;= <span class="hljs-number">0.5</span>) {
            s = diff / sum;
        } <span class="hljs-keyword">else</span> { <span class="hljs-comment">//l &gt; 0.5</span>
            s = diff / (<span class="hljs-number">2</span> - sum);
        }

        <span class="hljs-keyword">return</span> kolor.hsla(h, s, l, a);
    }</pre></div></div>
            
        </li>
        
        
        <li id="section-46">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-46">&#182;</a>
              </div>
              <p>Converts RGBA color to HSVA.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">RGBA_TO_HSVA</span><span class="hljs-params">()</span> </span>{
        <span class="hljs-keyword">var</span> r = <span class="hljs-keyword">this</span>.r() / <span class="hljs-number">255</span>,
            g = <span class="hljs-keyword">this</span>.g() / <span class="hljs-number">255</span>,
            b = <span class="hljs-keyword">this</span>.b() / <span class="hljs-number">255</span>,
            a = <span class="hljs-keyword">this</span>.a(),
            max = <span class="hljs-built_in">Math</span>.max(r, g, b),
            min = <span class="hljs-built_in">Math</span>.min(r, g, b),
            diff = max - min,
            h, s, l;

        <span class="hljs-keyword">if</span> (max === min) {
            h = <span class="hljs-number">0</span>;
        } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (max === r &amp;&amp; g &gt;= b) {
            h = <span class="hljs-number">60</span> * (g - b) / diff + <span class="hljs-number">0</span>;
        } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (max === r &amp;&amp; g &lt; b) {
            h = <span class="hljs-number">60</span> * (g - b) / diff + <span class="hljs-number">360</span>;
        } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (max === g) {
            h = <span class="hljs-number">60</span> * (b - r) / diff + <span class="hljs-number">120</span>;
        } <span class="hljs-keyword">else</span> { <span class="hljs-comment">//max === b</span>
            h = <span class="hljs-number">60</span> * (r - g) / diff + <span class="hljs-number">240</span>;
        }

        <span class="hljs-keyword">if</span> (max === <span class="hljs-number">0</span>) {
            s = <span class="hljs-number">0</span>;
        } <span class="hljs-keyword">else</span> {
            s = diff / max;
        }

        v = max;

        <span class="hljs-keyword">return</span> kolor.hsva(h, s, v, a);
    }</pre></div></div>
            
        </li>
        
        
        <li id="section-47">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-47">&#182;</a>
              </div>
              <p>Converts RGBA color to GRAY</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">RGBA_TO_GRAY</span><span class="hljs-params">()</span> </span>{
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.grayscale();
    }</pre></div></div>
            
        </li>
        
        
        <li id="section-48">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-48">&#182;</a>
              </div>
              <p>Converts HSLA color to RGBA.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">HSLA_TO_RGBA</span><span class="hljs-params">()</span> </span>{
        <span class="hljs-keyword">var</span> h = <span class="hljs-keyword">this</span>.h(),
            s = <span class="hljs-keyword">this</span>.s(),
            l = <span class="hljs-keyword">this</span>.l(),
            a = <span class="hljs-keyword">this</span>.a(),
            q = l &lt; <span class="hljs-number">0.5</span> ? l * (<span class="hljs-number">1</span> + s) : l + s - l * s,
            p = <span class="hljs-number">2</span> * l - q,
            hk = h / <span class="hljs-number">360</span>,
            t = {},
            rgb = {};

        t.r = hk + <span class="hljs-number">1</span> / <span class="hljs-number">3</span>;
        t.g = hk;
        t.b = hk - <span class="hljs-number">1</span> / <span class="hljs-number">3</span>;

        <span class="hljs-keyword">var</span> c;

        <span class="hljs-keyword">for</span> (c <span class="hljs-keyword">in</span> t) {
            t[c] &lt; <span class="hljs-number">0</span> &amp;&amp; t[c] ++;
            t[c] &gt; <span class="hljs-number">1</span> &amp;&amp; t[c] --;
        }

        <span class="hljs-keyword">for</span> (c <span class="hljs-keyword">in</span> t) {
            <span class="hljs-keyword">if</span> (t[c] &lt; <span class="hljs-number">1</span> / <span class="hljs-number">6</span>) {
                rgb[c] = p + ((q - p) * <span class="hljs-number">6</span> * t[c]);
            } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (<span class="hljs-number">1</span> / <span class="hljs-number">6</span> &lt;= t[c] &amp;&amp; t[c] &lt; <span class="hljs-number">0.5</span>) {
                rgb[c] = q;
            } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (<span class="hljs-number">0.5</span> &lt;= t[c] &amp;&amp; t[c] &lt; <span class="hljs-number">2</span> / <span class="hljs-number">3</span>) {
                rgb[c] = p + ((q - p) * <span class="hljs-number">6</span> * (<span class="hljs-number">2</span> / <span class="hljs-number">3</span> - t[c]));
            } <span class="hljs-keyword">else</span> { <span class="hljs-comment">//t[c] &gt;= 2 / 3</span>
                rgb[c] = p;
            }
            rgb[c] *= <span class="hljs-number">255</span>;
        }

        <span class="hljs-keyword">return</span> kolor.rgba(rgb.r, rgb.g, rgb.b, a);
    }</pre></div></div>
            
        </li>
        
        
        <li id="section-49">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-49">&#182;</a>
              </div>
              <p>Converts HSLA color to HSVA.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">HSLA_TO_HSVA</span><span class="hljs-params">()</span> </span>{
        <span class="hljs-keyword">var</span> h = <span class="hljs-keyword">this</span>.h(),
            s = <span class="hljs-keyword">this</span>.s(),
            l = <span class="hljs-keyword">this</span>.l(),
            a = <span class="hljs-keyword">this</span>.a(),
            sv,
            v;

        l *= <span class="hljs-number">2</span>;
        s *= (l &lt;= <span class="hljs-number">1</span>) ? l : <span class="hljs-number">2</span> - l;
        v = (l + s) / <span class="hljs-number">2</span>;
        sv = (<span class="hljs-number">2</span> * s) / (l + s);
        <span class="hljs-keyword">return</span> kolor.hsva(h, sv, v, a);
    }</pre></div></div>
            
        </li>
        
        
        <li id="section-50">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-50">&#182;</a>
              </div>
              <p>Converts HSVA color to RGBA.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">HSVA_TO_RGBA</span><span class="hljs-params">()</span> </span>{
        <span class="hljs-keyword">var</span> h = <span class="hljs-keyword">this</span>.h(),
            s = <span class="hljs-keyword">this</span>.s(),
            v = <span class="hljs-keyword">this</span>.v(),
            a = <span class="hljs-keyword">this</span>.a(),
            hi = <span class="hljs-built_in">Math</span>.floor(h / <span class="hljs-number">60</span>),
            f = h / <span class="hljs-number">60</span> - hi,
            p = v * (<span class="hljs-number">1</span> - s),
            q = v * (<span class="hljs-number">1</span> - f * s),
            t = v * (<span class="hljs-number">1</span> - (<span class="hljs-number">1</span> - f) * s),
            rgba;

        <span class="hljs-keyword">switch</span>(hi) {
            <span class="hljs-keyword">case</span> <span class="hljs-number">0</span>:
                rgba = [v, t, p, a]; <span class="hljs-keyword">break</span>;
            <span class="hljs-keyword">case</span> <span class="hljs-number">1</span>:
                rgba = [q, v, p, a]; <span class="hljs-keyword">break</span>;
            <span class="hljs-keyword">case</span> <span class="hljs-number">2</span>:
                rgba = [p, v, t, a]; <span class="hljs-keyword">break</span>;
            <span class="hljs-keyword">case</span> <span class="hljs-number">3</span>:
                rgba = [p, q, v, a]; <span class="hljs-keyword">break</span>;
            <span class="hljs-keyword">case</span> <span class="hljs-number">4</span>:
                rgba = [t, p, v, a]; <span class="hljs-keyword">break</span>;
            <span class="hljs-keyword">case</span> <span class="hljs-number">5</span>:
                rgba = [v, p, q, a]; <span class="hljs-keyword">break</span>;
            <span class="hljs-keyword">default</span>:
                rgba = [<span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, a];
        }

        <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> i = rgba.length - <span class="hljs-number">1</span>; i--;) {
            rgba[i] *= <span class="hljs-number">255</span>;
        }

        <span class="hljs-keyword">return</span> kolor.rgba(rgba);
    }</pre></div></div>
            
        </li>
        
        
        <li id="section-51">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-51">&#182;</a>
              </div>
              <p>Converts HSVA color to HSLA.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">HSVA_TO_HSLA</span><span class="hljs-params">()</span> </span>{
        <span class="hljs-keyword">var</span> h = <span class="hljs-keyword">this</span>.h(),
            s = <span class="hljs-keyword">this</span>.s(),
            v = <span class="hljs-keyword">this</span>.v(),
            a = <span class="hljs-keyword">this</span>.a(),
            sl,
            l;

        l = (<span class="hljs-number">2</span> - s) * v;
        sl = s * v;
        sl /= (l &lt;= <span class="hljs-number">1</span>) ? l : <span class="hljs-number">2</span> - l;
        sl = sl || <span class="hljs-number">0</span>;
        l /= <span class="hljs-number">2</span>;
        <span class="hljs-keyword">return</span> kolor.hsva(h, sl, l, a);
    }</pre></div></div>
            
        </li>
        
        
        <li id="section-52">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-52">&#182;</a>
              </div>
              <p>Converts HSVA color to HWB.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">HSVA_TO_HWB</span><span class="hljs-params">()</span> </span>{
        <span class="hljs-keyword">var</span> h = <span class="hljs-keyword">this</span>.h(),
            s = <span class="hljs-keyword">this</span>.s(),
            v = <span class="hljs-keyword">this</span>.v(),
            a = <span class="hljs-keyword">this</span>.a();
        <span class="hljs-keyword">return</span> kolor.hwb(h, (<span class="hljs-number">1</span> - s) * v, <span class="hljs-number">1</span> - v);
    }</pre></div></div>
            
        </li>
        
        
        <li id="section-53">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-53">&#182;</a>
              </div>
              <p>Converts HWB color to HSVA.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">HWB_TO_HSVA</span><span class="hljs-params">()</span> </span>{
        <span class="hljs-keyword">var</span> h = <span class="hljs-keyword">this</span>.h(),
            w = <span class="hljs-keyword">this</span>.w(),
            b = <span class="hljs-keyword">this</span>.b(),
            a = <span class="hljs-keyword">this</span>.a();
        <span class="hljs-keyword">return</span> kolor.hsva(h, <span class="hljs-number">1</span> - w / (<span class="hljs-number">1</span> - b), <span class="hljs-number">1</span> - b, a);
    }</pre></div></div>
            
        </li>
        
        
        <li id="section-54">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-54">&#182;</a>
              </div>
              <p>Converts GRAY color to RGBA.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">GRAY_TO_RGBA</span><span class="hljs-params">()</span> </span>{
        <span class="hljs-keyword">var</span> s = <span class="hljs-keyword">this</span>.s(),
            a = <span class="hljs-keyword">this</span>.a();

        <span class="hljs-keyword">return</span> kolor.rgba(s, s, s, a);
    }</pre></div></div>
            
        </li>
        
        
        <li id="section-55">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-55">&#182;</a>
              </div>
              <p>Naively converts CMYK color to RGBA.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">CMYK_TO_RGB</span><span class="hljs-params">()</span> </span>{
        <span class="hljs-keyword">var</span> c = <span class="hljs-keyword">this</span>.c() / <span class="hljs-number">255</span>,
            m = <span class="hljs-keyword">this</span>.m() / <span class="hljs-number">255</span>,
            y = <span class="hljs-keyword">this</span>.y() / <span class="hljs-number">255</span>,
            black = <span class="hljs-keyword">this</span>.b();

        <span class="hljs-keyword">var</span> r = <span class="hljs-number">1</span> - <span class="hljs-built_in">Math</span>.min(<span class="hljs-number">1</span>, c * (<span class="hljs-number">1</span> - black) + black);
            g = <span class="hljs-number">1</span> - <span class="hljs-built_in">Math</span>.min(<span class="hljs-number">1</span>, m * (<span class="hljs-number">1</span> - black) + black);
            b = <span class="hljs-number">1</span> - <span class="hljs-built_in">Math</span>.min(<span class="hljs-number">1</span>, y * (<span class="hljs-number">1</span> - black) + black);
        <span class="hljs-keyword">return</span> kolor.rgb(r, g, b);
    }

    <span class="hljs-keyword">var</span> CONVERTERS = {
        RGB: {
            RGBA: ADD_ALPHA,
            CMYK: RGB_TO_CMYK
        },
        RGBA: {
            RGB: REMOVE_ALPHA,
            HSLA: RGBA_TO_HSLA,
            HSVA: RGBA_TO_HSVA,
            GRAY: RGBA_TO_GRAY
        },
        HSL: {
            HSLA: ADD_ALPHA
        },
        HSLA: {
            HSL: REMOVE_ALPHA,
            HSVA: HSLA_TO_HSVA,
            RGBA: HSLA_TO_RGBA,
        },
        HSV: {
            HSVA: ADD_ALPHA
        },
        HSVA: {
            HSV: REMOVE_ALPHA,
            RGBA: HSVA_TO_RGBA,
            HSLA: HSVA_TO_HSLA,
            HWB: HSVA_TO_HWB,
        },
        HWB: {
            HSVA: HWB_TO_HSVA
        },
        GRAY: {
            RGBA: GRAY_TO_RGBA
        },
        CMYK: {
            RGB: CMYK_TO_RGB
        }
    };</pre></div></div>
            
        </li>
        
        
        <li id="section-56">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-56">&#182;</a>
              </div>
              <p>Breadth-first search to find the conversion path</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">getConverters</span><span class="hljs-params">(from, to)</span> </span>{
        <span class="hljs-keyword">if</span> (from === to) {
            <span class="hljs-keyword">return</span> [];
        }

        <span class="hljs-keyword">if</span> (CONVERTERS[from][to]) {
            <span class="hljs-keyword">return</span> [to];
        }

        <span class="hljs-keyword">var</span> queue = [from];
        <span class="hljs-keyword">var</span> path = {};
        path[from] = [];
        <span class="hljs-keyword">var</span> chain = [];

        <span class="hljs-keyword">while</span> (queue.length) {
            <span class="hljs-keyword">var</span> v = queue.shift();
            <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> w <span class="hljs-keyword">in</span> CONVERTERS[v]) {
                <span class="hljs-keyword">if</span> (!path[w]) {
                    queue.push(w);
                    path[w] = path[v].concat([w]);
                    <span class="hljs-keyword">if</span> (w === to) {
                        <span class="hljs-keyword">return</span> path[w];
                    }
                }
            }
        }

        <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;
    }</pre></div></div>
            
        </li>
        
        
        <li id="section-57">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-57">&#182;</a>
              </div>
              <p>Filters input value according to data type definitions and color space configurations.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">filterValue</span><span class="hljs-params">(value, channel)</span> </span>{
        <span class="hljs-keyword">var</span> type;
        <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> key <span class="hljs-keyword">in</span> DATATYPES) {
            type = DATATYPES[key];
            <span class="hljs-keyword">if</span> (type.flag &amp; channel.dataType) {
                <span class="hljs-keyword">var</span> val = type.parse(value);
                <span class="hljs-keyword">if</span> (val !== <span class="hljs-literal">false</span>) {
                    <span class="hljs-keyword">if</span> (type.flag === PERCENT) {
                        val *= <span class="hljs-built_in">Math</span>.abs(channel.range[<span class="hljs-number">1</span>] - channel.range[<span class="hljs-number">0</span>]);
                    }
                    <span class="hljs-keyword">return</span> channel.filter(val);
                }
            }
        }
        <span class="hljs-keyword">return</span> channel.initial;
    }</pre></div></div>
            
        </li>
        
        
        <li id="section-58">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-58">&#182;</a>
              </div>
              <h2 id="kolor-api">kolor API</h2>

            </div>
            
        </li>
        
        
        <li id="section-59">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-59">&#182;</a>
              </div>
              <h4 id="kolor-exp-">kolor(<em>exp</em>)</h4>
<p><code>kolor</code> as a function is used as a factory method to parse given expressions into color objects.</p>
<h5 id="parameters">Parameters</h5>
<ul>
<li><em>exp</em> - the expression to be parsed. If <em>exp</em> is another color object, the factory method clones and
returns it as the result. If <em>exp</em> is a string, it can be any of the following types:<pre><code> * A color name defined <span class="hljs-keyword">in</span> <span class="hljs-string">`NAMED_COLORS`</span>.
 * A hex value like <span class="hljs-string">`#FF0000`</span>, <span class="hljs-string">`#F00`</span>, or even <span class="hljs-string">`ff0000`</span>, <span class="hljs-string">`F00`</span>, etc.
 * A CSS-style color expression like <span class="hljs-string">`rgba(255, 0, 0, 1)`</span>, <span class="hljs-string">`hsl(120, 50%, 25%)`</span>, etc.
</code></pre></li>
</ul>
<h5 id="return-values">Return values</h5>
<p>Returns a color object in a certain space decided by the given expression. Color names and hex values
result in RGB colors, while CSS-style expressions specify the output space themselves.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    <span class="hljs-keyword">var</span> kolor = <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(exp)</span> </span>{</pre></div></div>
            
        </li>
        
        
        <li id="section-60">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-60">&#182;</a>
              </div>
              <p>Check if the input is another color object by checking the private attribute <code>_space</code>.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>        <span class="hljs-keyword">if</span> (exp._space &amp;&amp; util.has(kolor, exp._space)) {
            <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> kolor[exp._space](exp.toArray());
        }</pre></div></div>
            
        </li>
        
        
        <li id="section-61">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-61">&#182;</a>
              </div>
              <p>Check if the input is a predefined color name and create again using hex value on success.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>        <span class="hljs-keyword">if</span> (util.has(NAMED_COLORS, exp)) {
            <span class="hljs-keyword">return</span> kolor(NAMED_COLORS[exp.toLowerCase()]);
        }</pre></div></div>
            
        </li>
        
        
        <li id="section-62">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-62">&#182;</a>
              </div>
              <p>Try to match hex values, return RGB color on success.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>        <span class="hljs-keyword">var</span> found = <span class="hljs-regexp">/^\s*#?([0-9a-f]{3}|[0-9a-f]{6})\s*$/i</span>.exec(exp),
            hex, rgb = [];
        <span class="hljs-keyword">if</span> (found) {
            hex = found[<span class="hljs-number">1</span>];
            <span class="hljs-keyword">if</span> (hex.length === <span class="hljs-number">3</span>) {
                hex = [hex.charAt(<span class="hljs-number">0</span>), hex.charAt(<span class="hljs-number">0</span>), hex.charAt(<span class="hljs-number">1</span>), hex.charAt(<span class="hljs-number">1</span>), hex.charAt(<span class="hljs-number">2</span>), hex.charAt(<span class="hljs-number">2</span>)].join(<span class="hljs-string">''</span>);
            }
            <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> i = <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">3</span>; i++) {
                rgb.push(<span class="hljs-built_in">parseInt</span>(hex.substring(i * <span class="hljs-number">2</span>, i * <span class="hljs-number">2</span> + <span class="hljs-number">2</span>), <span class="hljs-number">16</span>));
            }
            <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> kolor.RGB(rgb);
        }</pre></div></div>
            
        </li>
        
        
        <li id="section-63">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-63">&#182;</a>
              </div>
              <p>Recognize specific space with pattern mathing and return color object in corresponding space.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>        <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> key <span class="hljs-keyword">in</span> SPACES) {
            found = SPACES[key].pattern.exec(exp);
            <span class="hljs-keyword">if</span> (found) {
                <span class="hljs-keyword">var</span> args = found.slice(<span class="hljs-number">1</span>);
                <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> kolor[key](args);
            }
        }</pre></div></div>
            
        </li>
        
        
        <li id="section-64">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-64">&#182;</a>
              </div>
              <p>Return false if fail to parse the input expression.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>        <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
    };

    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> key <span class="hljs-keyword">in</span> SPACES) {</pre></div></div>
            
        </li>
        
        
        <li id="section-65">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-65">&#182;</a>
              </div>
              <h3 id="factory-methods-for-each-color-space">Factory methods for each color space</h3>

            </div>
            
        </li>
        
        
        <li id="section-66">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-66">&#182;</a>
              </div>
              <h4 id="kolor-space-values-">kolor.<em>space</em>(<em>values</em>)</h4>
<p>Creates a color object using a space name defined in <code>SPACES</code>.</p>
<h5 id="parameters">Parameters</h5>
<ul>
<li><p><em>values</em> - the expression carries channel values of the color. It can be separate values,
an array or an object containing specific key-value pairs.</p>
<p> For example,</p>
<ul>
<li>kolor.rgb(255, 0, 0)</li>
<li>kolor.rgb([255, 0, 0])</li>
<li>kolor.rgb({ r: 255, g: 0, b: 0 })</li>
</ul>
</li>
</ul>

            </div>
            
            <div class="content"><div class='highlight'><pre>        kolor[key.toLowerCase()] = (<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(key)</span> </span>{
            <span class="hljs-keyword">return</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">()</span> </span>{
                <span class="hljs-keyword">var</span> args = util.slice(<span class="hljs-built_in">arguments</span>, <span class="hljs-number">0</span>),
                    type = util.typeOf(args[<span class="hljs-number">0</span>]);
                <span class="hljs-keyword">if</span> (type === <span class="hljs-string">'Array'</span> || type === <span class="hljs-string">'Object'</span>) {
                    args = args[<span class="hljs-number">0</span>];
                }
                <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> kolor[key](args);
            };
        }(key));

        <span class="hljs-keyword">var</span> space = SPACES[key],
            channels = space.channels;</pre></div></div>
            
        </li>
        
        
        <li id="section-67">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-67">&#182;</a>
              </div>
              <h3 id="constructor">Constructor</h3>
<p>When <code>kolor</code> is used as a factory method, it will call these constructors.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>        kolor[key] = (<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(key)</span> </span>{
            <span class="hljs-keyword">return</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(args)</span> </span>{
                <span class="hljs-keyword">var</span> channels = SPACES[key].channels,
                    l = channels.length;
                args = args == <span class="hljs-literal">null</span> ? [] : args;
                <span class="hljs-keyword">this</span>._space = key;
                <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> i = l; i--;) {
                    <span class="hljs-keyword">var</span> channel = channels[i],
                        name = channel.name,
                        alias = channel.alias,
                        param;
                    <span class="hljs-keyword">if</span> (args[i] != <span class="hljs-literal">null</span>) {
                        param = args[i];
                    } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (util.has(args, name)) {
                        param = args[name];
                    } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (util.has(args, alias)) {
                        param = args[alias];
                    } <span class="hljs-keyword">else</span> {
                        param = channel.initial;
                    }
                    <span class="hljs-keyword">this</span>[name](param);
                }
                <span class="hljs-keyword">this</span>.length = l;
            };
        })(key);</pre></div></div>
            
        </li>
        
        
        <li id="section-68">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-68">&#182;</a>
              </div>
              <h3 id="accessors">Accessors</h3>
<h4 id="-accessor-value-">.<em>accessor</em>([<em>value</em>])</h4>
<p>kolor uses jQuery-like accessors.</p>
<p>Different color spaces have different accessors, for example</p>
<ul>
<li>for RGB colors <code>color.red()</code> retrieves channel value and <code>color.red(100)</code> sets it;</li>
<li>for HSL we’ve got <code>color.hue()</code> and <code>color.hue(120)</code></li>
</ul>
<p>Shorthand accessors like <code>color.r()</code>, <code>color.h()</code> are also available.</p>
<h5 id="parameters">Parameters</h5>
<ul>
<li><em>value</em> - if not null, sets the specified channel to the given value, or returns the value
of the specified channel.</li>
</ul>
<h5 id="return-values">Return values</h5>
<p>Returns the channel value when used as a getter, or the color object itself when used as a
getter.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>        <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> i = channels.length; i--;) {
            <span class="hljs-keyword">var</span> channel = channels[i],
                alias = channel.alias;

            kolor[key].prototype[channel.name] = <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(i)</span> </span>{
                <span class="hljs-keyword">var</span> channel = channels[i],
                    prop = <span class="hljs-string">'_'</span> + channel.alias;
                <span class="hljs-keyword">return</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(value)</span> </span>{
                    <span class="hljs-keyword">if</span> (value != <span class="hljs-literal">null</span>) {
                        <span class="hljs-keyword">this</span>[prop] = <span class="hljs-keyword">this</span>[i] = filterValue(value, channel);
                        <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>;
                    } <span class="hljs-keyword">else</span> {
                        <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>[prop];
                    }
                };
            }(i);

            <span class="hljs-keyword">if</span> (util.typeOf(alias) === <span class="hljs-string">'String'</span>) {
                alias = [alias];
            }
            <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> j = alias.length; j--;) {
                kolor[key].prototype[alias[j]] = kolor[key].prototype[channel.name];
            }
        }</pre></div></div>
            
        </li>
        
        
        <li id="section-69">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-69">&#182;</a>
              </div>
              <h4 id="-space-">.space()</h4>
<p>A getter for the space of the color object.</p>
<h5 id="return-values">Return values</h5>
<p>Returns the space string in all caps such as <code>RGBA</code>, <code>HSV</code>, etc.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>        kolor[key].prototype.space = <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">()</span> </span>{
            <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>._space;
        };</pre></div></div>
            
        </li>
        
        
        <li id="section-70">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-70">&#182;</a>
              </div>
              <h4 id="-format-">.format()</h4>
<p>Deprecated. Same as <code>.space()</code> and preserved just for backward compatibility.</p>
<h5 id="return-values">Return values</h5>
<p>Returns the space string in all caps such as <code>RGBA</code>, <code>HSV</code>, etc.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>        kolor[key].prototype.format = <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">()</span> </span>{
            <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.space();
        };</pre></div></div>
            
        </li>
        
        
        <li id="section-71">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-71">&#182;</a>
              </div>
              <h3 id="converters">Converters</h3>
<h4 id="-converter-">.<em>converter</em>()</h4>
<p>Converts the color to the specified space. Converter names are lower-cased space names.</p>
<h5 id="return-values">Return values</h5>
<p>Returns a new color object in target space, if target space is the same as the original
one, a new color object will be cloned and returned.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>        <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> target <span class="hljs-keyword">in</span> SPACES) {
            <span class="hljs-keyword">if</span> (key === target) {
                <span class="hljs-keyword">continue</span>;
            }</pre></div></div>
            
        </li>
        
        
        <li id="section-72">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-72">&#182;</a>
              </div>
              <p>array or null</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>            <span class="hljs-keyword">var</span> converters = getConverters(key, target);

            kolor[key].prototype[target.toLowerCase()] = (<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(key, converters)</span> </span>{
                <span class="hljs-keyword">return</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">()</span> </span>{
                    <span class="hljs-keyword">if</span> (converters === <span class="hljs-literal">null</span>) {
                        <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">Error</span>(<span class="hljs-string">'Can\'t convert '</span> + key + <span class="hljs-string">' colors into '</span> + target + <span class="hljs-string">'.'</span>);
                    }
                    <span class="hljs-keyword">var</span> from = key;
                    <span class="hljs-keyword">var</span> result = <span class="hljs-keyword">this</span>;
                    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> i = <span class="hljs-number">0</span>, j = converters.length; i &lt; j; i++) {
                        <span class="hljs-keyword">var</span> current = converters[i];
                        <span class="hljs-keyword">var</span> converter = CONVERTERS[from][current];
                        result = converter.call(result);
                        from = current;
                    }
                    <span class="hljs-keyword">return</span> result;
                };
            })(key, converters);
        }
        kolor[key].prototype[key.toLowerCase()] = CLONE;</pre></div></div>
            
        </li>
        
        
        <li id="section-73">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-73">&#182;</a>
              </div>
              <h3 id="common-methods">Common methods</h3>

            </div>
            
        </li>
        
        
        <li id="section-74">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-74">&#182;</a>
              </div>
              <h4 id="-toarray-">.toArray()</h4>
<p>Produces an array carrying channel values. Because the channel values are stored both in
private attribute such as <code>_red</code> or <code>_alpha</code>, and integer keys start from <code>0</code>, the color
objects can use some array methods like <code>slice</code>.</p>
<h5 id="return-values">Return values</h5>
<p>Returns an array consists of the color’s channel values.</p>
<p>For <code>rgba(255, 0, 0, 1)</code>, the return value is <code>[255, 0, 0, 1]</code>.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>        kolor[key].prototype.toArray = <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">()</span> </span>{
            <span class="hljs-keyword">return</span> util.slice(<span class="hljs-keyword">this</span>, <span class="hljs-number">0</span>);
        };</pre></div></div>
            
        </li>
        
        
        <li id="section-75">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-75">&#182;</a>
              </div>
              <h4 id="-css-tostring-">.css(), .toString()</h4>
<p>Outputs color channel values as a CSS-style string.</p>
<h5 id="return-values">Return values</h5>
<p>Returns the CSS-style string for the color object.</p>
<p>By CSS-style string we mean something like <code>rgba(255, 0, 0, 0.5)</code>, <code>hsl(30, 80%, 100%)</code>, etc.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>        kolor[key].prototype.css = kolor[key].prototype.toString = <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">()</span> </span>{
            <span class="hljs-keyword">var</span> channels = SPACES[<span class="hljs-keyword">this</span>.space()].channels,
                l = channels.length,
                channel,
                values = [];
            <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> i = <span class="hljs-number">0</span>; i &lt; l; i++) {
                channel = channels[i];
                values.push(DATATYPES[channel.cssType].stringify(<span class="hljs-keyword">this</span>[channel.name]()));
            }
            <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.space().toLowerCase() + <span class="hljs-string">'('</span> + values.join(<span class="hljs-string">', '</span>) + <span class="hljs-string">')'</span>;
        };</pre></div></div>
            
        </li>
        
        
        <li id="section-76">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-76">&#182;</a>
              </div>
              <h4 id="-hex-">.hex()</h4>
<p>Outputs color channels as a hex string.</p>
<h5 id="return-values">Return values</h5>
<p>Returns a hex string corresponds to the RGB space of the color,
which means the color is converted to RGB first and the hex value is produced
by its RGB channels.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>        kolor[key].prototype.hex = <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">()</span> </span>{
            <span class="hljs-keyword">var</span> color = <span class="hljs-keyword">this</span>;
            <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.space() !== <span class="hljs-string">'RGB'</span>) {
                color = <span class="hljs-keyword">this</span>.rgb();
            }
            <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">toHex</span><span class="hljs-params">(n)</span> </span>{
                <span class="hljs-keyword">return</span> util.zeroFill(<span class="hljs-built_in">Math</span>.round(n).toString(<span class="hljs-number">16</span>), <span class="hljs-number">2</span>);
            }
            <span class="hljs-keyword">return</span> [<span class="hljs-string">'#'</span>, toHex(color.r()), toHex(color.g()), toHex(color.b())].join(<span class="hljs-string">''</span>);
        };</pre></div></div>
            
        </li>
        
        
        <li id="section-77">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-77">&#182;</a>
              </div>
              <h4 id="-copyfrom-color-">.copyFrom(<em>color</em>)</h4>
<p>Converts channel values of another color to the same space as the current one and
copies them to the current color.</p>
<h5 id="parameters">Parameters</h5>
<ul>
<li><em>color</em> - the color to be copied from.</li>
</ul>

            </div>
            
            <div class="content"><div class='highlight'><pre>        kolor[key].prototype.copyFrom = <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(color)</span> </span>{
            <span class="hljs-keyword">var</span> space = <span class="hljs-keyword">this</span>.space(),
                channels = SPACES[space].channels,
                i, accessor;
            <span class="hljs-keyword">if</span> (color.space() !== space) {
                color = color[space.toLowerCase()]();
            }
            <span class="hljs-keyword">for</span> (i = channels.length; i--;) {
                accessor = channels[i].name;
                <span class="hljs-keyword">this</span>[accessor](color[accessor]());
            }
        };</pre></div></div>
            
        </li>
        
        
        <li id="section-78">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-78">&#182;</a>
              </div>
              <h3 id="less-sass-like-apis">LESS/SASS-like APIs</h3>

            </div>
            
        </li>
        
        
        <li id="section-79">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-79">&#182;</a>
              </div>
              <h4 id="-mix-color-proportion-0-5-">.mix(<em>color</em> [, <em>proportion</em> = 0.5])</h4>
<p>Mixes with another color using additive mixing.</p>
<p>Algorithm taken from
<a href="http://sass-lang.com/docs/yardoc/Sass/Script/Functions.html#mix-instance_method">SASS source code</a></p>
<h5 id="parameters">Parameters</h5>
<ul>
<li><em>color</em> - a color object to mix with the current one</li>
<li><em>proportion</em> - the proportion of the other color, ranging from 0 to 1.</li>
</ul>
<h5 id="return-values">Return values</h5>
<p>Returns a new color object in the same space as the original one.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>        kolor[key].prototype.mix = <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(color, proportion)</span> </span>{
            <span class="hljs-keyword">var</span> dest = <span class="hljs-keyword">this</span>.rgba(),
                src = color.rgba(),
                p = proportion == <span class="hljs-literal">null</span> ? <span class="hljs-number">0.5</span> : proportion,
                w = p * <span class="hljs-number">2</span> - <span class="hljs-number">1</span>,
                a = dest.a() - src.a(),
                w1 = (((w * a === -<span class="hljs-number">1</span>) ? w : (w + a)/(<span class="hljs-number">1</span> + w * a)) + <span class="hljs-number">1</span>) / <span class="hljs-number">2</span>,
                w2 = <span class="hljs-number">1</span> - w1;
            dest.r(dest.r() * w1 + src.r() * w2);
            dest.g(dest.g() * w1 + src.g() * w2);
            dest.b(dest.b() * w1 + src.b() * w2);
            dest.a(dest.a() * p + src.a() * (<span class="hljs-number">1</span> - p));
            <span class="hljs-keyword">return</span> dest[<span class="hljs-keyword">this</span>.space().toLowerCase()]();
        };</pre></div></div>
            
        </li>
        
        
        <li id="section-80">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-80">&#182;</a>
              </div>
              <h4 id="-spin-value-">.spin(<em>value</em>)</h4>
<p>Increases hue value (decreases if value is less than zero) or say spins the color wheel
clockwise by a given degree.</p>
<h5 id="parameters">Parameters</h5>
<ul>
<li><em>value</em> - the value that the color wheel will spin, in degree.</li>
</ul>
<h5 id="return-values">Return values</h5>
<p>Returns a new color object after spinning in the original space.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>        kolor[key].prototype.spin = <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(value)</span> </span>{
            <span class="hljs-keyword">var</span> color = <span class="hljs-keyword">this</span>.hsla();
            color.h((color.h() + value) % <span class="hljs-number">360</span>);
            <span class="hljs-keyword">return</span> color[<span class="hljs-keyword">this</span>.space().toLowerCase()]();
        };</pre></div></div>
            
        </li>
        
        
        <li id="section-81">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-81">&#182;</a>
              </div>
              <h4 id="-saturate-value-">.saturate(<em>value</em>)</h4>
<p>Increases saturation value. Saturation channel here defined by HSL model, not HSV.</p>
<h5 id="parameters">Parameters</h5>
<ul>
<li><em>value</em> - the amount that the saturation value will increase.</li>
</ul>
<h5 id="return-values">Return values</h5>
<p>Returns a new color object after increasing saturation in the original space.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>        kolor[key].prototype.saturate = <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(value)</span> </span>{
            <span class="hljs-keyword">var</span> color = <span class="hljs-keyword">this</span>.hsla();
            color.s((color.s() + value));
            <span class="hljs-keyword">return</span> color[<span class="hljs-keyword">this</span>.space().toLowerCase()]();
        };</pre></div></div>
            
        </li>
        
        
        <li id="section-82">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-82">&#182;</a>
              </div>
              <h4 id="-desaturate-value-">.desaturate(<em>value</em>)</h4>
<p>Decreases saturation value. Saturation channel here defined by HSL model, not HSV.</p>
<h5 id="parameters">Parameters</h5>
<ul>
<li><em>value</em> - the amount that the saturation value will decrease.</li>
</ul>
<h5 id="return-values">Return values</h5>
<p>Returns a new color object after decreasing saturation in the original space.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>        kolor[key].prototype.desaturate = <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(value)</span> </span>{
            <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.saturate(<span class="hljs-number">0</span> - value);
        };</pre></div></div>
            
        </li>
        
        
        <li id="section-83">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-83">&#182;</a>
              </div>
              <h4 id="-lighten-value-">.lighten(<em>value</em>)</h4>
<p>Increases lightness value.</p>
<h5 id="parameters">Parameters</h5>
<ul>
<li><em>value</em> - the amount that the lightness value will the increase.</li>
</ul>
<h5 id="return-values">Return values</h5>
<p>Returns a new color object after increasing lightness in the original space.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>        kolor[key].prototype.lighten = <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(value)</span> </span>{
            <span class="hljs-keyword">var</span> color = <span class="hljs-keyword">this</span>.hsla();
            color.l((color.l() + value));
            <span class="hljs-keyword">return</span> color[<span class="hljs-keyword">this</span>.space().toLowerCase()]();
        };</pre></div></div>
            
        </li>
        
        
        <li id="section-84">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-84">&#182;</a>
              </div>
              <h4 id="-darken-value-">.darken(<em>value</em>)</h4>
<p>Decreases lightness value.</p>
<h5 id="parameters">Parameters</h5>
<ul>
<li><em>value</em> - the amount that the lightness value will the decrease.</li>
</ul>
<h5 id="return-values">Return values</h5>
<p>Returns a new color object after decreasing lightness in the original space.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>        kolor[key].prototype.darken = <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(value)</span> </span>{
            <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.lighten(<span class="hljs-number">0</span> - value);
        };</pre></div></div>
            
        </li>
        
        
        <li id="section-85">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-85">&#182;</a>
              </div>
              <h4 id="-fadein-value-">.fadeIn(<em>value</em>)</h4>
<p>Increases alpha value, will add alpha channel to those don’t have it.</p>
<h5 id="parameters">Parameters</h5>
<ul>
<li><em>value</em> - the amount that the alpha value will the increase.</li>
</ul>
<h5 id="return-values">Return values</h5>
<p>Returns a new color object after increasing alpha in the original space.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>        kolor[key].prototype.fadeIn = <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(value)</span> </span>{
            <span class="hljs-keyword">var</span> space = <span class="hljs-keyword">this</span>.a ? <span class="hljs-keyword">this</span>.space() : <span class="hljs-keyword">this</span>.space() + <span class="hljs-string">'A'</span>,
                color = <span class="hljs-keyword">this</span>[space.toLowerCase()]();
            <span class="hljs-keyword">return</span> color.a(color.a() + value);
        };</pre></div></div>
            
        </li>
        
        
        <li id="section-86">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-86">&#182;</a>
              </div>
              <h4 id="-fadeout-value-">.fadeOut(<em>value</em>)</h4>
<p>Decreases alpha value, will add alpha channel to those don’t have it.</p>
<h5 id="parameters">Parameters</h5>
<ul>
<li><em>value</em> - the amount that the alpha value will the decrease.</li>
</ul>
<h5 id="return-values">Return values</h5>
<p>Returns a new color object after decreasing alpha in the original space.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>        kolor[key].prototype.fadeOut = <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(value)</span> </span>{
            <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.fadeIn(<span class="hljs-number">0</span> - value);
        };</pre></div></div>
            
        </li>
        
        
        <li id="section-87">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-87">&#182;</a>
              </div>
              <h4 id="-grayscale-">.grayscale()</h4>
<p>Returns the grayscale color by decreasing saturation(HSL) of the current color to 0.</p>
<h5 id="return-values">Return values</h5>
<p>Returns a new grayscaled color object in the original space.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>        kolor[key].prototype.grayscale = <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">()</span> </span>{
            <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.desaturate(<span class="hljs-number">1</span>);
        };</pre></div></div>
            
        </li>
        
        
        <li id="section-88">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-88">&#182;</a>
              </div>
              <h4 id="-complement-">.complement()</h4>
<p>Returns the complement of the current color by spinning the color wheel for 180 degrees.</p>
<h5 id="return-values">Return values</h5>
<p>Returns a new complement color object the original space.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>        kolor[key].prototype.complement = <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">()</span> </span>{
            <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.spin(<span class="hljs-number">180</span>);
        };</pre></div></div>
            
        </li>
        
        
        <li id="section-89">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-89">&#182;</a>
              </div>
              <h4 id="-luminance-">.luminance()</h4>
<p>Returns the luminance of a color which indicates how bright the reflecting surface will
appear. See <a href="http://www.w3.org/TR/WCAG20/#relativeluminancedef">relative luminance, Web Content Accessibility Guidelines (WCAG) 2.0</a>.</p>
<h5 id="return-values">Return values</h5>
<p>The calculated luminance value.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>        kolor[key].prototype.luminance = <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">()</span> </span>{
            <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">convert</span><span class="hljs-params">(value)</span> </span>{
                value /= <span class="hljs-number">255</span>;
                <span class="hljs-keyword">return</span> value &lt;= <span class="hljs-number">0.03928</span> ? value / <span class="hljs-number">12.92</span> : <span class="hljs-built_in">Math</span>.pow((value + <span class="hljs-number">0.055</span>) / <span class="hljs-number">1.055</span>, <span class="hljs-number">2.4</span>);
            }

            <span class="hljs-keyword">var</span> color = <span class="hljs-keyword">this</span>.rgb(),
                R = convert(color.r()),
                G = convert(color.g()),
                B = convert(color.b());

            <span class="hljs-keyword">return</span> <span class="hljs-number">0.2126</span> * R + <span class="hljs-number">0.7152</span> * G + <span class="hljs-number">0.0722</span> * B;
        };</pre></div></div>
            
        </li>
        
        
        <li id="section-90">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-90">&#182;</a>
              </div>
              <h4 id="-contrastratio-">.contrastRatio()</h4>
<p>Returns the contrast ratio of two colors.
See <a href="http://dev.w3.org/csswg/css-color/#contrast-ratio">Contrast ratio, CSS Color Module Level 4</a>.</p>
<h5 id="parameters">Parameters</h5>
<ul>
<li><em>color</em> - the color object to be compared to.</li>
</ul>
<h5 id="return-values">Return values</h5>
<p>The calculated contrast ratio.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>        kolor[key].prototype.contrastRatio = <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(color)</span> </span>{
            <span class="hljs-keyword">var</span> l1 = <span class="hljs-keyword">this</span>.luminance(),
                l2 = color.luminance();
            <span class="hljs-keyword">return</span> (<span class="hljs-built_in">Math</span>.max(l1, l2) + <span class="hljs-number">0.05</span>) / (<span class="hljs-built_in">Math</span>.min(l1, l2) + <span class="hljs-number">0.05</span>);
        };
    }</pre></div></div>
            
        </li>
        
        
        <li id="section-91">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-91">&#182;</a>
              </div>
              <h3 id="kolor-utilities">kolor utilities</h3>
<h4 id="kolor-config-key-value-">kolor.config(<em>key</em>, <em>value</em>)</h4>
<p>Global config for kolor.</p>
<h5 id="parameters">Parameters</h5>
<p><em>key</em> - the name of the config item.
<em>value</em> - the config value is to be used.</p>
<p>Only one available <em>key</em> now:</p>
<ul>
<li><code>cssPrecision</code> - if set to an integer, kolor keeps at most this number
of digits after the period when outputing CSS expressions using <code>.css()</code>
or <code>.toString()</code>. <code>auto</code> by default, means kolor won’t handle precision
when making the output.</li>
</ul>

            </div>
            
            <div class="content"><div class='highlight'><pre>    kolor.config = <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(key, value)</span> </span>{
        config[key] = value;
    }</pre></div></div>
            
        </li>
        
        
        <li id="section-92">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-92">&#182;</a>
              </div>
              <h4 id="kolor-random-options-unstable-api-">kolor.random(<em>options</em>) [unstable API]</h4>
<p>Generates a random color or color set. Colors are generated in HSL space
and different colors will have different hue values and these colors are
distributed uniformly across the specified hue range.</p>
<h5 id="parameters">Parameters</h5>
<p><em>options</em> - a map consists of the options for the random procedure.</p>
<ul>
<li><p><em>size</em> - Number, <code>1</code> by default.</p>
<p>  The number of colors to generate.</p>
</li>
<li><p><em>h</em> - Array, <code>[0, 360]</code> by default.</p>
<p>  The range of hue value.</p>
</li>
<li><p><em>s</em> - Number | Array, <code>[0, 1]</code> by default.</p>
<p>  The range of saturation. If set to a number, use this fixed value.</p>
</li>
<li><p><em>l</em> - Number | Array, <code>[0, 1]</code> by default.</p>
<p>  The range of lightness. If set to a number, use this fixed value.</p>
</li>
<li><p><em>space</em> - String, <code>&quot;hex&quot;</code> by default.</p>
<p>  The output space for the generated color(s). Available values include</p>
<p>  <code>hex</code>, <code>css</code> and space names defined in <code>SPACES</code>, which are
  case-insensitive.</p>
</li>
<li><p><em>shuffle</em> - Boolean, <code>true</code> by default.</p>
<p>  If the output array should be shuffled.</p>
</li>
</ul>
<h5 id="return-values">Return values</h5>
<p>If size is undefined or 1, returns a random color in the specified space.
Otherwise, returns an array such colors.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    kolor.random = <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(options)</span> </span>{
        options = options || {};

        <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">getValue</span><span class="hljs-params">(value, defaultValue)</span> </span>{
            <span class="hljs-keyword">return</span> value != <span class="hljs-literal">null</span> ? value : defaultValue;
        }

        <span class="hljs-keyword">var</span> size = options.size || <span class="hljs-number">1</span>,
            h = getValue(options.h, [<span class="hljs-number">0</span>, <span class="hljs-number">360</span>]),
            interval = <span class="hljs-built_in">Math</span>.floor(((<span class="hljs-number">360</span> + (h[<span class="hljs-number">1</span>] - h[<span class="hljs-number">0</span>])) % <span class="hljs-number">360</span> || <span class="hljs-number">360</span>) / size),
            offset = <span class="hljs-built_in">Math</span>.random() * interval,
            s = getValue(options.s, [<span class="hljs-number">0</span>, <span class="hljs-number">1</span>]),
            l = getValue(options.l, [<span class="hljs-number">0</span>, <span class="hljs-number">1</span>]),
            a = getValue(options.a, <span class="hljs-number">1</span>),
            shuffle = getValue(options.shuffle, <span class="hljs-literal">true</span>),
            space = (options.space || <span class="hljs-string">'hex'</span>).toLowerCase(),
            colors = [],
            color, i;

        <span class="hljs-keyword">if</span> (interval === <span class="hljs-number">0</span>) {
            <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">Error</span>(<span class="hljs-string">'To many colors for this hue range!'</span>);
        }

        <span class="hljs-keyword">for</span> (i = <span class="hljs-number">0</span>; i &lt; size; i++) {
            color = kolor.hsla(
                (<span class="hljs-number">360</span> + h[<span class="hljs-number">0</span>] + interval * i + offset) % <span class="hljs-number">360</span>,
                s.length ? util.random(s[<span class="hljs-number">0</span>], s[<span class="hljs-number">1</span>]) : s,
                l.length ? util.random(l[<span class="hljs-number">0</span>], l[<span class="hljs-number">1</span>]) : l,
                a.length ? util.random(a[<span class="hljs-number">0</span>], a[<span class="hljs-number">1</span>]) : a
            );
            <span class="hljs-keyword">if</span> (space == <span class="hljs-string">'hex'</span>) {
                color = color.hex();
            } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (space == <span class="hljs-string">'css'</span>) {
                color = color.css();
            } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (util.has(SPACES, space.toUpperCase())) {
                color = color[space]();
            }
            colors.push(color);
        }

        <span class="hljs-keyword">if</span> (size === <span class="hljs-number">1</span>) {
            <span class="hljs-keyword">return</span> colors[<span class="hljs-number">0</span>];
        }

        shuffle &amp;&amp; util.shuffle(colors);
        <span class="hljs-keyword">return</span> colors;
    };</pre></div></div>
            
        </li>
        
        
        <li id="section-93">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-93">&#182;</a>
              </div>
              <p>Everything is ready, export the whole module</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    define(<span class="hljs-string">"kolor"</span>, <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(require, exports, module)</span> </span>{
        <span class="hljs-built_in">module</span>.exports = kolor;
    });

}(<span class="hljs-keyword">typeof</span> define === <span class="hljs-string">'function'</span> &amp;&amp; define.amd ? define : <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(id, factory)</span> </span>{</pre></div></div>
            
        </li>
        
        
        <li id="section-94">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-94">&#182;</a>
              </div>
              <p>Define it the UMD way</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>
    <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> exports !== <span class="hljs-string">'undefined'</span>) {
        factory(<span class="hljs-built_in">require</span>, exports, <span class="hljs-built_in">module</span>);
    } <span class="hljs-keyword">else</span> {
        <span class="hljs-keyword">var</span> mod = {};
        <span class="hljs-keyword">var</span> exp = {};

        factory(<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(value)</span> </span>{
            <span class="hljs-keyword">return</span> <span class="hljs-built_in">window</span>[value];
        }, exp, mod);

        <span class="hljs-keyword">if</span> (mod.exports) {</pre></div></div>
            
        </li>
        
        
        <li id="section-95">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-95">&#182;</a>
              </div>
              <p>Defining output using <code>module.exports</code></p>

            </div>
            
            <div class="content"><div class='highlight'><pre>            <span class="hljs-built_in">window</span>[id] = mod.exports;
        } <span class="hljs-keyword">else</span> {</pre></div></div>
            
        </li>
        
        
        <li id="section-96">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-96">&#182;</a>
              </div>
              <p>Defining output using <code>exports.*</code></p>

            </div>
            
            <div class="content"><div class='highlight'><pre>            <span class="hljs-built_in">window</span>[id] = exp;
        }
    }
}));</pre></div></div>
            
        </li>
        
    </ul>
  </div>
</body>
</html>
